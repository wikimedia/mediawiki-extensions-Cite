{
	"name": "Cite",
	"author": [
		"Ævar Arnfjörð Bjarmason",
		"Andrew Garrett",
		"Brion Vibber",
		"Ed Sanders",
		"Marius Hoch",
		"Steve Sanbeg",
		"Trevor Parscal",
		"..."
	],
	"url": "https://www.mediawiki.org/wiki/Extension:Cite",
	"descriptionmsg": "cite-desc",
	"license-name": "GPL-2.0-or-later",
	"type": "parserhook",
	"requires": {
		"MediaWiki": ">= 1.43"
	},
	"MessagesDirs": {
		"Cite": [
			"i18n",
			"modules/ve-cite/i18n"
		]
	},
	"Hooks": {
		"APIQuerySiteInfoGeneralInfo": "main",
		"ContentHandlerDefaultModelFor": "main",
		"GetPreferences": "main",
		"ParserAfterParse": "parser",
		"ParserClearState": "parser",
		"ParserCloned": "parser",
		"ParserFirstCallInit": "parser",
		"EditPage::showEditForm:initial": "main",
		"MakeGlobalVariablesScript": "main",
		"ResourceLoaderGetConfigVars": "main",
		"ResourceLoaderRegisterModules": "main",
		"UserGetDefaultOptions": "main"
	},
	"HookHandlers": {
		"main": {
			"class": "Cite\\Hooks\\CiteHooks",
			"services": [
				"Cite.ReferencePreviewsContext",
				"Cite.GadgetsIntegration",
				"UserOptionsLookup"
			]
		},
		"parser": {
			"class": "Cite\\Hooks\\CiteParserHooks",
			"services": [
				"MainConfig"
			]
		}
	},
	"ResourceModules": {
		"ext.cite.styles": {
			"styles": {
				"ext.cite.styles.less": {},
				"ext.cite.print.less": {
					"media": "print"
				}
			},
			"skinStyles": {
				"minerva": "ext.cite.styles.minerva.less"
			}
		},
		"ext.cite.parsoid.styles": {
			"localBasePath": "modules/parsoid-styles",
			"remoteExtPath": "Cite/modules/parsoid-styles",
			"class": "Cite\\ResourceLoader\\CiteCSSFileModule",
			"styles": "ext.cite.parsoid.styles.less",
			"skinStyles": {
				"minerva": "ext.cite.parsoid.styles.minerva.less"
			}
		},
		"ext.cite.ux-enhancements": {
			"localBasePath": "modules",
			"remoteExtPath": "Cite/modules",
			"scripts": [
				"ext.cite.a11y.js",
				"ext.cite.highlighting.js",
				"ext.cite.tracking.js"
			],
			"styles": [
				"ext.cite.a11y.less",
				"ext.cite.highlighting.less"
			],
			"messages": [
				"cite_references_link_accessibility_label",
				"cite_references_link_many_accessibility_label",
				"cite_references_link_accessibility_back_label"
			]
		}
	},
	"ResourceFileModulePaths": {
		"localBasePath": "modules",
		"remoteExtPath": "Cite/modules"
	},
	"ServiceWiringFiles": [
		"src/ServiceWiring.php"
	],
	"QUnitTestModule": {
		"localBasePath": "",
		"remoteExtPath": "Cite",
		"scripts": [
			"tests/qunit/ext.cite.referencePreviews/createReferenceGateway.test.js",
			"tests/qunit/ext.cite.referencePreviews/isReferencePreviewsEnabled.test.js",
			"tests/qunit/ext.cite.referencePreviews/renderer.test.js"
		],
		"optional": {
			"Popups": {
				"dependencies": [
					"ext.cite.referencePreviews"
				]
			},
			"VisualEditor": {
				"scripts": [
					"tests/qunit/ve-cite/ve.dm.citeExample.js",
					"tests/qunit/ve-cite/ve.dm.Converter.test.js",
					"tests/qunit/ve-cite/ve.dm.MWDocumentReferences.test.js",
					"tests/qunit/ve-cite/ve.dm.MWGroupReferences.test.js",
					"tests/qunit/ve-cite/ve.dm.InternalList.test.js",
					"tests/qunit/ve-cite/ve.dm.MWReferenceModel.test.js",
					"tests/qunit/ve-cite/ve.dm.MWReferenceNode.test.js",
					"tests/qunit/ve-cite/ve.dm.MWReferencesListNode.test.js",
					"tests/qunit/ve-cite/ve.dm.Transaction.test.js",
					"tests/qunit/ve-cite/ve.ui.DiffElement.test.js",
					"tests/qunit/ve-cite/ve.ui.MWCitationDialogTool.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferenceContextItem.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferenceEditPanel.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferenceGroupInputWidget.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferenceResultWidget.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferenceSearchWidget.test.js",
					"tests/qunit/ve-cite/ve.ui.MWReferencesListDialog.test.js",
					"tests/qunit/ve-cite/ve.ui.MWUseExistingReferenceCommand.test.js",
					"tests/qunit/ve-cite/ve.ui.MWWikitextStringTransferHandler.test.js"
				],
				"dependencies": [
					"ext.cite.visualEditor",
					"test.VisualEditor"
				]
			}
		},
		"factory": "Cite\\ResourceLoader\\OptionalLoader::addOptional"
	},
	"attributes": {
		"CodeMirror": {
			"TagModes": {
				"ref": "text/mediawiki",
				"references": "text/mediawiki"
			}
		},
		"EventLogging": {
			"Schemas": {
				"ReferencePreviewsPopups": "/analytics/legacy/referencepreviewspopups/1.1.0"
			}
		},
		"Popups": {
			"PluginModules": [
				"ext.cite.referencePreviews"
			]
		},
		"VisualEditor": {
			"PluginModules": [
				"ext.cite.visualEditor"
			]
		}
	},
	"ConfigRegistry": {
		"cite": "GlobalVarConfig::newInstance"
	},
	"config": {
		"CiteBookReferencing": {
			"description": "Temporary feature flag while the extends=\"…\" feature (a way to nest citations and e.g. reference pages in a book) is in development.",
			"public": true,
			"value": false
		},
		"CiteVisualEditorOtherGroup": {
			"description": "If VisualEditor should list the citation features as part of the existing \"Insert\" drop-down menu instead of a top-level \"Cite\" toolbar button.",
			"public": true,
			"value": false
		},
		"CiteResponsiveReferences": {
			"description": "If long <references /> lists with more than $wgCiteResponsiveReferencesThreshold references should behave responsive by default and be displayed in two or more columns. This can also be toggled individually with <references responsive /> to enable and <references responsive=\"0\" /> to disable it.",
			"public": true,
			"value": true
		},
		"CiteResponsiveReferencesThreshold": {
			"description": "The number of references at which CiteResponsiveReferences is enabled.",
			"public": true,
			"value": 10
		},
		"CiteReferencePreviews": {
			"description": "Feature flag to enable or disable the popups provided by the Popups extension for <ref> tags.",
			"value": true
		},
		"CiteReferencePreviewsConflictingNavPopupsGadgetName": {
			"description": "@var string: Name of a gadget that would cause duplicate reference preview popups. Should usually be identical to wgPopupsConflictingNavPopupsGadgetName in the Popups extension.",
			"value": "Navigation_popups"
		},
		"CiteReferencePreviewsConflictingRefTooltipsGadgetName": {
			"description": "@var string: Name of a gadget that would cause duplicate reference preview popups. Known conflicting gadgets include \"ReferenceTooltips\", \"CiteTooltip\" alias \"RefTooltip\", \"ReferencePopups\", and \"tooltipRef\" (see T274353).",
			"value": "ReferenceTooltips"
		}
	},
	"AutoloadNamespaces": {
		"Cite\\": "src/"
	},
	"TestAutoloadNamespaces": {
		"Cite\\Tests\\": "tests/phpunit/"
	},
	"TrackingCategories": [
		"cite-tracking-category-cite-error",
		"cite-tracking-category-ref-extends"
	],
	"ParsoidModules": [
		{
			"name": "Cite",
			"domProcessors": [
				{
					"class": "Cite\\Parsoid\\RefProcessor",
					"services": [
						"MainConfig"
					]
				}
			],
			"tags": [
				{
					"name": "ref",
					"handler": "Cite\\Parsoid\\Ref",
					"options": {
						"wt2html": {
							"unpackOutput": false,
							"embedsHTMLInAttributes": true
						},
						"outputHasCoreMwDomSpecMarkup": true
					}
				},
				{
					"name": "references",
					"handler": {
						"class": "Cite\\Parsoid\\References",
						"services": [
							"MainConfig"
						]
					},
					"options": {
						"wt2html": {
							"embedsHTMLInAttributes": true
						},
						"html2wt": {
							"format": "block"
						},
						"outputHasCoreMwDomSpecMarkup": true
					}
				}
			]
		}
	],
	"manifest_version": 2
}
